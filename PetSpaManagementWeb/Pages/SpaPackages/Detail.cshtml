@page
@model PetSpaManagementWeb.Pages.SpaPackages.DetailModel
@{
}
<div class="container">

    <h1>Details</h1>
    <div>
        <h4>Spa Package</h4>
        <hr />
        <dl class="row">
            <div>
                @if (!string.IsNullOrEmpty(Model.SpaPackageDetailResponse.SpaPackage.PictureUrl))
                {
                    <img src="@Model.SpaPackageDetailResponse.SpaPackage.PictureUrl" alt="Spa Package Image" style="max-width: 30%; border-radius: 10px" />
                }
                else
                {
                    <p>No image available</p>
                }
            </div>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.SpaPackageDetailResponse.SpaPackage.Name)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.SpaPackageDetailResponse.SpaPackage.Name)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.SpaPackageDetailResponse.SpaPackage.Description)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.SpaPackageDetailResponse.SpaPackage.Description)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.SpaPackageDetailResponse.SpaPackage.Price)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.SpaPackageDetailResponse.SpaPackage.Price)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.SpaPackageDetailResponse.SpaPackage.EstimatedTime)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.SpaPackageDetailResponse.SpaPackage.EstimatedTime)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.SpaPackageDetailResponse.Services)
            </dt>
            <dd class="col-sm-10">
                <ul>
                    @foreach (var service in Model.SpaPackageDetailResponse.Services)
                    {
                        <li>
                            @service.Name
                            @{
                                var fromWeight = service.Weight.FromWeight;
                                var toWeight = service.Weight.ToWeight;
                                string displayWeight = $"{fromWeight} - {toWeight}kg";
                            }
                            @Html.DisplayFor(modelItem => displayWeight)
                        </li>
                    }
                </ul>
            </dd>
        </dl>
    </div>
    @if (Model.ErrorMessage != null)
    {
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            @Model.ErrorMessage
        </div>
    }

    <div class="form-group mt-3">

        <form method="get" asp-page="/CustomerDashboard/Appointments/Create" asp-route-SpaPackageId="@Model.SpaPackageDetailResponse.SpaPackage.Name">
            <input type="hidden" name="SpaPackageId" value="@Model.SpaPackageDetailResponse.SpaPackage.Name" />

            <button type="submit" class="btn btn-primary">Make an appointment</button>
        </form>
    </div>
</div>