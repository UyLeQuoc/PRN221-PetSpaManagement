@page "{id:int}"
@model PetSpaManagementWeb.Pages.CustomerDashboard.Appointments.DetailsModel

@{
    ViewData["Title"] = "Appointment Details";
}

<h1>Appointment Details</h1>

<div>
    <h4>Appointment</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            Spa Package
        </dt>
        <dd class="col-sm-10">
            @Model.Appointment.SpaPackage?.Name
        </dd>
        <dt class="col-sm-2">
            Pet
        </dt>
        <dd class="col-sm-10">
            @Model.Appointment.Pet?.Name
        </dd>
        <dt class="col-sm-2">
            Date and Time
        </dt>
        <dd class="col-sm-10">
            @Model.Appointment.DateTime
        </dd>
        <dt class="col-sm-2">
            Status
        </dt>
        <dd class="col-sm-10">
            <span class="badge" style="background-color:@(Model.Appointment.Status == "PENDING" ? "#ffc107" :
                                Model.Appointment.Status == "ASSIGNED" ? "#007bff" :
                                Model.Appointment.Status == "COMPLETED" ? "#28a745" :
                                Model.Appointment.Status == "CANCELLED" ? "#dc3545" :
                                "gray")">
                @Model.Appointment.Status
            </span>
        </dd>
        <dt class="col-sm-2">
            Notes
        </dt>
        <dd class="col-sm-10">
            @Model.Appointment.Notes
        </dd>
        <dt class="col-sm-2">
            Price
        </dt>
        <dd class="col-sm-10">
            @Model.Appointment.Price
        </dd>
    </dl>
    <div>
        @if ( @Model.Appointment.Payments.Any() )
        {
            if  (Model.Appointment.Payments.First().Status != "COMPLETED")
            {
                <div class="alert alert-warning">
                    APPOINTMENT IS UNPAID, PAY FOR IT NOW
                    <form method="post" asp-page-handler="Pay" class="mt-2">
                        <input type="hidden" asp-for="Appointment.Id" />
                        <button type="submit" class="btn btn-danger">PAY FOR PAYMENT</button>
                    </form>
                </div>
            }
        }
        <a asp-page="./Index">Back to List</a>
    </div>
</div>
